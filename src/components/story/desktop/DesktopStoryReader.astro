---
import type { Story } from "../../../lib/stories";

export interface Props {
  story: Story;
}

const { story } = Astro.props;
---

<div class="desktop-story-reader">
  <!-- 导航栏 -->
  <nav class="story-nav">
    <a href="/" class="back-btn">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m12 19-7-7 7-7"/>
        <path d="M19 12H5"/>
      </svg>
      返回书架
    </a>
    <div class="book-info">
      <h1 class="story-title">{story.config.title}</h1>
    </div>
    <button id="autoplayToggle" class="autoplay-btn" title="自动播放">
      <!-- 自动播放开启图标 (播放) -->
      <svg id="autoplayPlayIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polygon points="5,3 19,12 5,21"/>
      </svg>
      <!-- 自动播放关闭图标 (暂停) -->
      <svg id="autoplayPauseIcon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
        <rect x="6" y="4" width="4" height="16"/>
        <rect x="14" y="4" width="4" height="16"/>
      </svg>
      <span class="autoplay-text">自动播放</span>
    </button>
  </nav>

  <!-- 书本阅读器 -->
  <div class="book-container" id="bookContainer">
    <div class="book-wrapper">
      <!-- 左页（图片页） -->
      <div class="book-page left-page">
        <div class="page-content">
          <div class="image-frame">
            <img 
              id="storyImage" 
              src={story.images.pages[0]} 
              alt={`${story.config.title} - 第1页`}
              loading="lazy"
              class="story-image"
              width="896"
              height="1200"
            />
          </div>
        </div>
      </div>

      <!-- 右页（文字页） -->
      <div class="book-page right-page">
        <div class="page-content">
          <div class="text-content">
            <p id="storyText" class="story-text">
              {story.config.pages[0]}
            </p>
          </div>
          
          <!-- 页面底部控制区域 -->
          <div class="page-controls">
            <!-- 音频控制区域 -->
            <div class="audio-controls" id="audioControls">
              <button id="playPauseBtn" class="audio-btn" title="播放/暂停">
                <svg id="playIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polygon points="5,3 19,12 5,21"/>
                </svg>
                <svg id="pauseIcon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="display: none;">
                  <rect x="6" y="4" width="4" height="16"/>
                  <rect x="14" y="4" width="4" height="16"/>
                </svg>
              </button>
              <div class="audio-progress">
                <span id="currentTime" class="audio-time-display">0:00</span>
                <div class="progress-bar" id="progressBar">
                  <div class="progress-fill" id="progressFill"></div>
                </div>
                <span id="totalTime" class="audio-time-display">0:00</span>
              </div>
              <audio id="audioPlayer" preload="metadata"></audio>
            </div>
            
            <!-- 页码指示器 -->
            <div class="page-indicator">
              第 <span id="currentPageNum">1</span> / {story.config.pages.length} 页
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- 数据传递给JavaScript -->
<script define:vars={{ 
  storyPages: story.config.pages,
  storyImages: story.images.pages,
  storyAudios: story.audios?.pages || [],
  storyTitle: story.config.title
}}>
  class BookReader {
    constructor(pages, images, audios, title) {
      this.pages = pages;
      this.images = images;
      this.audios = audios;
      this.title = title;
      this.currentPage = 0;
      this.totalPages = pages.length;
      this.hasAudio = audios && audios.length > 0;
      
      this.isPlaying = false;
      this.currentAudio = null;
      
      // Auto-play state
      this.isAutoplaying = false;
      this.isAutoTriggeredPlay = false;
      
      this.initElements();
      this.bindEvents();
      this.updatePage();
      this.initAudioControls();
    }

    initElements() {
      this.storyImage = document.getElementById('storyImage');
      this.storyText = document.getElementById('storyText');
      this.currentPageNumSpan = document.getElementById('currentPageNum');
      this.bookContainer = document.getElementById('bookContainer');
      
      // 获取左右页面元素
      this.leftPage = document.querySelector('.left-page');
      this.rightPage = document.querySelector('.right-page');
      
      this.audioPlayer = document.getElementById('audioPlayer');
      this.audioControls = document.getElementById('audioControls');
      this.playPauseBtn = document.getElementById('playPauseBtn');
      this.playIcon = document.getElementById('playIcon');
      this.pauseIcon = document.getElementById('pauseIcon');
      this.progressBar = document.getElementById('progressBar');
      this.progressFill = document.getElementById('progressFill');
      this.currentTimeSpan = document.getElementById('currentTime');
      this.totalTimeSpan = document.getElementById('totalTime');
      
      // Auto-play elements
      this.autoplayToggle = document.getElementById('autoplayToggle');
      this.autoplayPlayIcon = document.getElementById('autoplayPlayIcon');
      this.autoplayPauseIcon = document.getElementById('autoplayPauseIcon');
    }

    bindEvents() {
      // 点击左页往前翻
      this.leftPage.addEventListener('click', (e) => {
        // 避免点击音频控件时触发翻页
        if (!e.target.closest('.audio-controls, .page-controls')) {
          this.previousPage();
        }
      });
      
      // 点击右页往后翻
      this.rightPage.addEventListener('click', (e) => {
        // 避免点击音频控件时触发翻页
        if (!e.target.closest('.audio-controls, .page-controls')) {
          this.nextPage();
        }
      });
      
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') this.previousPage();
        if (e.key === 'ArrowRight') this.nextPage();
        if (e.key === ' ') {
          e.preventDefault();
          this.togglePlayPause();
        }
      });
      
      // Auto-play toggle event
      if (this.autoplayToggle) {
        this.autoplayToggle.addEventListener('click', () => this.toggleAutoplay());
      }
    }

    updatePage() {
      // 更新图片
      this.storyImage.src = this.images[this.currentPage];
      this.storyImage.alt = `${this.title} - 第${this.currentPage + 1}页`;
      
      this.storyImage.onerror = () => {
        console.warn(`图片加载失败: ${this.images[this.currentPage]}`);
      };
      
      // 更新文字
      this.storyText.textContent = this.pages[this.currentPage];
      
      // 更新页码
      this.currentPageNumSpan.textContent = this.currentPage + 1;
      
      // 更新页面指示器
      this.updatePageIndicator();
      
      // 更新音频
      this.updateAudio();
    }

    previousPage() {
      if (this.currentPage > 0) {
        this.currentPage--;
        this.updatePage();
      }
    }

    nextPage() {
      if (this.currentPage < this.totalPages - 1) {
        this.currentPage++;
        this.updatePage();
      }
    }

    updatePageIndicator() {
      // 更新页面的视觉状态，提供翻页反馈
      this.leftPage.style.cursor = this.currentPage > 0 ? 'pointer' : 'not-allowed';
      this.rightPage.style.cursor = this.currentPage < this.totalPages - 1 ? 'pointer' : 'not-allowed';
      
      // 添加页面禁用的视觉效果
      this.leftPage.style.opacity = this.currentPage > 0 ? '1' : '0.7';
      this.rightPage.style.opacity = this.currentPage < this.totalPages - 1 ? '1' : '0.7';
    }

    initAudioControls() {
      if (!this.hasAudio) {
        this.audioControls.style.display = 'none';
        if (this.autoplayToggle) {
          this.autoplayToggle.style.display = 'none';
        }
        return;
      }

      this.playPauseBtn.addEventListener('click', () => this.togglePlayPause());

      this.progressBar.addEventListener('click', (e) => {
        if (this.currentAudio && this.currentAudio.duration) {
          const rect = this.progressBar.getBoundingClientRect();
          const clickX = e.clientX - rect.left;
          const progressPercent = clickX / rect.width;
          this.currentAudio.currentTime = progressPercent * this.currentAudio.duration;
        }
      });

      if (this.audioPlayer) {
        this.audioPlayer.addEventListener('loadedmetadata', () => this.updateTotalTime());
        this.audioPlayer.addEventListener('timeupdate', () => this.updateProgress());
        this.audioPlayer.addEventListener('ended', () => this.onAudioEnded());
        this.audioPlayer.addEventListener('error', (e) => {
          console.warn('音频加载失败:', e);
          this.resetAudioUI();
        });
      }

      this.loadAudio(this.currentPage);
    }

    loadAudio(pageIndex) {
      if (!this.hasAudio || !this.audios[pageIndex]) {
        this.currentAudio = null;
        this.audioControls.style.display = 'none';
        return;
      }
      
      this.audioControls.style.display = 'flex';
      const audioUrl = this.audios[pageIndex];
      this.audioPlayer.src = audioUrl;
      this.currentAudio = this.audioPlayer;
    }

    updateAudio() {
      if (!this.hasAudio) return;

      if (this.currentAudio) {
        this.currentAudio.pause();
        this.currentAudio.currentTime = 0;
      }

      this.loadAudio(this.currentPage);
      this.resetAudioUI();
    }

    togglePlayPause() {
      if (!this.currentAudio) return;

      if (this.isPlaying) {
        this.pauseAudio();
      } else {
        // Mark as manual play (not auto-triggered)
        this.isAutoTriggeredPlay = false;
        this.playAudio();
      }
    }

    playAudio() {
      if (!this.currentAudio || !this.currentAudio.src) return;

      // 暂停其他所有正在播放的音频（全局管理）
      document.querySelectorAll('audio').forEach(audio => {
        if (audio !== this.currentAudio && !audio.paused) {
          audio.pause();
        }
      });

      // Reset progress bar to 0 if this is auto-triggered play
      if (this.isAutoTriggeredPlay) {
        this.currentAudio.currentTime = 0;
        this.progressFill.style.width = '0%';
      }

      this.currentAudio.play().then(() => {
        this.isPlaying = true;
        this.updatePlayPauseButton();
        
        // Reset the auto-trigger flag after successful play
        if (this.isAutoTriggeredPlay) {
          this.isAutoTriggeredPlay = false;
        }
      }).catch(error => {
        console.warn('音频播放失败:', error);
        this.isPlaying = false;
        this.updatePlayPauseButton();
        this.isAutoTriggeredPlay = false;
      });
    }

    pauseAudio() {
      if (!this.currentAudio) return;
      this.currentAudio.pause();
      this.isPlaying = false;
      this.updatePlayPauseButton();
    }

    updatePlayPauseButton() {
      if (this.isPlaying) {
        this.playIcon.style.display = 'none';
        this.pauseIcon.style.display = 'block';
        this.playPauseBtn.title = '暂停';
      } else {
        this.playIcon.style.display = 'block';
        this.pauseIcon.style.display = 'none';
        this.playPauseBtn.title = '播放';
      }
    }

    updateProgress() {
      if (!this.currentAudio || !this.currentAudio.duration) return;
      const progress = (this.currentAudio.currentTime / this.currentAudio.duration) * 100;
      this.progressFill.style.width = `${progress}%`;
      this.currentTimeSpan.textContent = this.formatTime(this.currentAudio.currentTime);
    }

    updateTotalTime() {
      if (!this.currentAudio || !this.currentAudio.duration) return;
      this.totalTimeSpan.textContent = this.formatTime(this.currentAudio.duration);
    }

    formatTime(seconds) {
      if (isNaN(seconds)) return '0:00';
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    resetAudioUI() {
      this.isPlaying = false;
      this.updatePlayPauseButton();
      this.progressFill.style.width = '0%';
      this.currentTimeSpan.textContent = '0:00';
      if (this.currentAudio && this.currentAudio.duration) {
        this.totalTimeSpan.textContent = this.formatTime(this.currentAudio.duration);
      } else {
        this.totalTimeSpan.textContent = '0:00';
      }
    }

    onAudioEnded() {
      this.isPlaying = false;
      this.updatePlayPauseButton();
      this.progressFill.style.width = '100%';
      
      // Auto-play next page if enabled
      if (this.isAutoplaying) {
        if (this.currentPage < this.totalPages - 1) {
          setTimeout(() => {
            this.nextPage();
            this.isAutoTriggeredPlay = true;
            this.playAudio();
          }, 500); // Small delay for smooth transition
        } else {
          // End of story, stop auto-play
          this.stopAutoplay();
        }
      }
    }

    toggleAutoplay() {
      if (!this.hasAudio) return;
      
      if (this.isAutoplaying) {
        this.stopAutoplay();
      } else {
        this.startAutoplay();
      }
    }

    startAutoplay() {
      if (this.isAutoplaying || !this.hasAudio) return;
      
      this.isAutoplaying = true;
      this.updateAutoplayButton();
      
      // If already playing manually, continue with auto-play mode
      if (this.isPlaying) {
        return;
      }
      
      // Start playing from current page
      this.isAutoTriggeredPlay = true;
      this.playAudio();
    }

    stopAutoplay() {
      if (!this.isAutoplaying) return;
      
      this.isAutoplaying = false;
      this.updateAutoplayButton();
      
      // Always pause current audio when stopping auto-play
      if (this.isPlaying) {
        this.pauseAudio();
      }
    }

    updateAutoplayButton() {
      if (!this.autoplayToggle || !this.autoplayPlayIcon || !this.autoplayPauseIcon) return;
      
      if (this.isAutoplaying) {
        this.autoplayPlayIcon.style.display = 'none';
        this.autoplayPauseIcon.style.display = 'block';
        this.autoplayToggle.title = '停止自动播放';
      } else {
        this.autoplayPlayIcon.style.display = 'block';
        this.autoplayPauseIcon.style.display = 'none';
        this.autoplayToggle.title = '自动播放';
      }
    }
  }

  // 初始化书本阅读器
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      new BookReader(storyPages, storyImages, storyAudios, storyTitle);
    });
  } else {
    new BookReader(storyPages, storyImages, storyAudios, storyTitle);
  }
</script>

<style>
  .desktop-story-reader {
    height: 100vh;
    background: 
      radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
      radial-gradient(circle at 80% 20%, rgba(255, 192, 203, 0.08) 0%, transparent 50%),
      linear-gradient(135deg, #faf7f2 0%, #f5f3ff 100%);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  /* 导航栏样式 */
  .story-nav {
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(10px);
    padding: 0.5rem 2rem;
    border-bottom: 1px solid rgba(236, 72, 153, 0.2);
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    flex-shrink: 0;
  }

  .back-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #a855f7;
    text-decoration: none;
    font-size: 0.9rem;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 20px;
    transition: all 0.3s ease;
    border: 1px solid transparent;
  }


  .book-info {
    text-align: center;
    color: #4b5563;
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .story-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937;
    margin: 0;
  }

  /* Remove controls-container styles since we're not using it anymore */

  .autoplay-btn {
    background: rgba(168, 85, 247, 0.1);
    border: 1px solid rgba(168, 85, 247, 0.2);
    border-radius: 20px;
    cursor: pointer;
    padding: 6px 12px;
    color: #a855f7;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    flex-shrink: 0;
    font-size: 0.85rem;
    font-weight: 500;
    transition: all 0.2s ease;
  }


  .autoplay-btn:focus, .autoplay-btn:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgba(168, 85, 247, 0.2);
  }

  .autoplay-text {
    display: inline; /* Show text for better clarity */
  }

  .page-indicator {
    font-size: 0.8rem;
    color: #6b7280;
    font-weight: 500;
    background-color: rgba(168, 85, 247, 0.08);
    padding: 4px 10px;
    border-radius: 12px;
    text-align: center;
    border: 1px solid rgba(168, 85, 247, 0.15);
  }

  /* 书本容器 */
  .book-container {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 1rem;
    position: relative;
    min-height: 0;
  }

  .book-wrapper {
    display: flex;
    width: 100%;
    height: 100%;
    max-width: 1400px;
    max-height: 85vh;
    position: relative;
    transition: transform 0.3s ease;
    /* 基于图片实际比例优化：896x1200 -> 双页约为 1792x1200 */
    aspect-ratio: 1.49;
    
    /* 真实书本的阴影效果 */
    box-shadow: 
      0 25px 50px -12px rgba(0, 0, 0, 0.25),
      0 15px 30px -8px rgba(0, 0, 0, 0.15),
      inset 0 1px 0 rgba(255, 255, 255, 0.6);
    
    border-radius: 12px 12px 8px 8px;
    
  }

  /* 书本厚度效果 */
  .book-wrapper::before {
    content: '';
    position: absolute;
    top: 4px;
    left: 4px;
    right: 4px;
    bottom: -12px;
    background: linear-gradient(to bottom, 
      rgba(0, 0, 0, 0.1) 0%, 
      rgba(0, 0, 0, 0.05) 30%, 
      rgba(0, 0, 0, 0.02) 100%);
    border-radius: 8px 8px 4px 4px;
    z-index: -1;
  }
  
  /* 书脊效果 */
  .book-wrapper::after {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 4px;
    background: linear-gradient(to bottom,
      rgba(139, 92, 246, 0.3) 0%,
      rgba(168, 85, 247, 0.2) 50%,
      rgba(139, 92, 246, 0.3) 100%);
    transform: translateX(-50%);
    z-index: 10;
    border-radius: 4px;
    box-shadow: 
      inset 0 0 4px rgba(0, 0, 0, 0.2),
      0 0 8px rgba(139, 92, 246, 0.15);
  }


  /* 书页样式 */
  .book-page {
    background: 
      linear-gradient(45deg, transparent 0%, rgba(255, 255, 255, 0.02) 25%, transparent 50%, rgba(255, 255, 255, 0.02) 75%, transparent 100%),
      linear-gradient(135deg, #fefefe 0%, #fdfcfc 30%, #fefefe 100%);
    padding: 1.5rem;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    position: relative;
    
    /* 纸张纹理 */
    background-image: 
      radial-gradient(circle at 1px 1px, rgba(139, 92, 246, 0.02) 1px, transparent 0);
    background-size: 20px 20px;
    
    /* 页面内部阴影 */
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.03);
  }

  .left-page {
    width: 50%;
    border-radius: 12px 2px 2px 8px;
    position: relative;
  }
  
  /* 左页的装订线阴影 */
  .left-page::after {
    content: '';
    position: absolute;
    right: 0;
    top: 0;
    bottom: 0;
    width: 20px;
    background: linear-gradient(to left,
      rgba(139, 92, 246, 0.08) 0%,
      rgba(139, 92, 246, 0.03) 50%,
      transparent 100%);
    pointer-events: none;
  }

  .right-page {
    width: 50%;
    border-radius: 2px 12px 8px 2px;
    position: relative;
  }
  
  /* 右页的装订线阴影 */
  .right-page::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 20px;
    background: linear-gradient(to right,
      rgba(139, 92, 246, 0.08) 0%,
      rgba(139, 92, 246, 0.03) 50%,
      transparent 100%);
    pointer-events: none;
  }

  .page-content {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: stretch;
  }

  .image-frame {
    width: 100%;
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden;
    background: 
      linear-gradient(135deg, #fafafa 0%, #f8f8f8 100%);
    border-radius: 8px;
    padding: 6px;
    position: relative;
    
    /* 图片框阴影 */
    box-shadow: 
      inset 0 2px 4px rgba(0, 0, 0, 0.06),
      0 1px 3px rgba(0, 0, 0, 0.12);
  }
  
  /* 装饰边框 */
  .image-frame::before {
    content: '';
    position: absolute;
    top: 4px;
    left: 4px;
    right: 4px;
    bottom: 4px;
    border: 1px solid rgba(139, 92, 246, 0.1);
    border-radius: 4px;
    pointer-events: none;
  }

  .story-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 4px;
    filter: saturate(1.1) contrast(1.05);
  }

  .right-page .page-content {
    padding: 1rem;
    justify-content: space-between;
  }

  .text-content {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    overflow-y: auto;
    padding: 0.5rem;
    position: relative;
    min-height: 0;
  }

  .story-text {
    font-family: 'SF Pro Text', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
    font-size: clamp(1rem, 1.3vw, 1.4rem);
    line-height: 2.2;
    color: #2c3e50;
    text-align: justify;
    text-indent: 2em;
    max-width: 100%;
    letter-spacing: 0.02em;
    font-weight: 400;
    
    /* 文字阴影增加深度感 */
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    
    /* 段落间距 */
    margin: 0;
    
    /* 优化中文显示 */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  .page-controls {
    width: 100%;
    padding-top: 1rem;
    flex-shrink: 0;
    border-top: 1px solid rgba(139, 92, 246, 0.1);
  }

  .audio-controls {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    padding: 0.75rem 0.5rem 0.5rem;
    background: rgba(139, 92, 246, 0.02);
    border-radius: 8px;
    margin-bottom: 0.5rem;
  }

  .audio-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0.25rem;
    color: #a855f7;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }

  .audio-btn:focus, .audio-btn:focus-visible {
    outline: none;
    box-shadow: none;
  }

  .audio-btn svg {
    width: 20px;
    height: 20px;
  }

  .audio-progress {
    flex-grow: 1;
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .progress-bar {
    flex-grow: 1;
    height: 10px;
    background-color: rgba(168, 85, 247, 0.15);
    border-radius: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
  }

  .progress-fill {
    height: 4px;
    width: 0%;
    background-color: #a855f7;
    border-radius: 2px;
    margin: 0 2px;
  }

  .audio-time-display {
    font-size: 0.75rem;
    color: #581c87;
    min-width: 70px;
    text-align: center;
    flex-shrink: 0;
  }

  /* 页面点击交互效果 */
  .left-page, .right-page {
    transition: all 0.2s ease;
    user-select: none;
  }


  .left-page:active, .right-page:active {
    transform: scale(0.995);
  }
</style>
